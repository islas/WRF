{
  "submit_options" :
  {
    "timelimit" : "00:20:00",
    "working_directory" : "..",
    "arguments" : 
    {
      "base_env_numprocs"          : [ "-e", "NUM_PROCS=4" ],

      ".*build.*::args_nesting"    : [ "-n", "1" ],
      ".*build.*::args_configopt"  : [ "-o", "-d" ],
      ".*build.*::args_build_tgt"  : [ "-b", "$IDEAL_CASE -j $NUM_PROCS" ],

      ".*build-serial::args_config": [ "-c", "32" ],
      ".*build-omp::args_config"   : [ "-c", "33" ],
      ".*build-mpi::args_config"   : [ "-c", "34" ],

      ".*testcase.*::global_env"   : [ "-e", "DATA=/path/to/data" ],
      ".*testcase.*::args_always"  : [ "-c", "test/$IDEAL_CASE", "-b", "ideal.exe", "-d", "$DATA/$IDEAL_CASE" ],
      ".*testcase-mpi.*::exec_mpi" : [ "-p", "mpirun -np $NUM_PROCS" ],
      ".*testcase-omp.*::env"      : [ "-e", "OMP_NUM_THREADS=$NUM_PROCS" ],

      ".*testcase-serial.*::dir"   : [ "-f", ".ci/tests/SCRIPTS/Namelists/weekly/$IDEAL_CASE/", "-s", "serial_results" ],
      ".*testcase-omp.*::dir"      : [ "-f", ".ci/tests/SCRIPTS/Namelists/weekly/$IDEAL_CASE/", "-i", "serial_results" ],
      ".*testcase-mpi.*::dir"      : [ "-f", ".ci/tests/SCRIPTS/Namelists/weekly/$IDEAL_CASE/", "-i", "serial_results" ]
    },
    "polaris"   :
    {
      "submission" : "LOCAL",
      "arguments"  :
      {
        "base_env_numprocs"          : [ "-e", "NUM_PROCS=8" ],
        ".*testcase.*::global_env"     :
        [ 
          "-e", "DATA=/mnt/s/github/data/wrf/regtest/Data",
          "-e", "LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$NETCDF/lib"
        ]
      }
    },
    "cheyenne"  :
    {
      "submission" : "PBS",
      "queue"     : "economy",
      "resources"  : "-l select=1:ncpus=6",
      "arguments"  : 
      {
        "base_env_numprocs"          : [ "-e", "NUM_PROCS=6" ],
        ".*testcase.*::global_env"     :
        [ 
          "-e", "DATA=/glade/work/aislas/github/data/wrf/regtest/Data/",
          "-e", "LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$NETCDF/lib"
        ],
        "global_modules" : [ "gnu", "netcdf" ],
        ".*mpi.*::mpi_module" : [ "openmpi/4.0.3" ]
      }
    },
    "hsn.de.hpc"  :
    {
      "submission" : "PBS",
      "queue"      : "main",
      "resources"  : "-l select=1:ncpus=8 -l job_priority=economy",
      "timelimit" : "00:10:00",
      "arguments"  : 
      {
        "base_env_numprocs"          : [ "-e", "NUM_PROCS=8" ],
        ".*testcase.*::global_env"     :
        [ 
          "-e", "DATA=/glade/work/aislas/github/data/wrf/regtest/Data/",
          "-e", "LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$NETCDF/lib"
        ],
        "global_modules" : [ "gcc", "netcdf" ],
        ".*mpi.*::mpi_module" : [ "cray-mpich" ]
      }
    }
  },
  "em_quarter_ss" :
  {
    "submit_options" :
    {
      "arguments" :
      {
        ".*testcase.*::args_namelist" : 
        [ 
          "-n", "namelist.input.02NE,namelist.input.03,namelist.input.03NE"
        ],
        ".*::args_idealcase"   :
        [
          "-e", "IDEAL_CASE=em_quarter_ss"
        ]
      }
    },
    "steps" :
    {
      "build-serial" :
      {
        "command"      : ".ci/tests/build.sh"
      },
      "testcase-serial" :
      {
        "submit_options" : {
                            "cheyenne" : { "resources" : "-l select=1:ncpus=1" },
                            "derecho"  : { "resources" : "-l select=1:ncpus=1 -l job_priority=economy" }
                            },
        "command"      : ".ci/tests/runNamelists.sh",
        "dependencies" : { "build-serial" : "afterok" }
      },
      "build-omp" :
      {
        "command"      : ".ci/tests/build.sh",
        "dependencies" : { "testcase-serial" : "afterok" }
      },
      "testcase-omp" :
      {
        "submit_options" : { 
                            "cheyenne" : { "resources" : "-l select=1:ncpus=4:ompthreads=4" },
                            "derecho"  : { "resources" : "-l select=1:ncpus=8:ompthreads=8 -l job_priority=economy" }
                            },
        "command"      : ".ci/tests/runNamelists.sh",
        "dependencies" : { "build-omp" : "afterok" }
      },
      "build-mpi" :
      {
        "command"      : ".ci/tests/build.sh",
        "dependencies" : { "testcase-omp" : "afterok" }
      },
      "testcase-mpi" :
      {
        "submit_options" : { 
                            "cheyenne" : { "resources" : "-l select=1:ncpus=4:mpiprocs=6" },
                            "derecho"  : { "resources" : "-l select=1:ncpus=8:mpiprocs=8 -l job_priority=economy" }
                            },
        "command"      : ".ci/tests/runNamelists.sh",
        "dependencies" : { "build-mpi" : "afterok" }
      }
    }
  },
  "em_quarter_ss_real8" :
  {
    "submit_options" :
    {
      "arguments" :
      {
        ".*build.*::args_configopt"   : [ "-o", "-d -r8" ],
        ".*testcase.*::args_namelist" : 
        [ 
          "-n", "namelist.input.08,namelist.input.09"
        ],
        ".*::args_idealcase"   :
        [
          "-e", "IDEAL_CASE=em_quarter_ss"
        ]
      }
    },
    "steps" :
    {
      "build-serial" :
      {
        "command"      : ".ci/tests/build.sh"
      },
      "testcase-serial" :
      {
        "submit_options" : {
                            "cheyenne" : { "resources" : "-l select=1:ncpus=1" },
                            "derecho"  : { "resources" : "-l select=1:ncpus=1 -l job_priority=economy" }
                            },
        "command"      : ".ci/tests/runNamelists.sh",
        "dependencies" : { "build-serial" : "afterok" }
      },
      "build-omp" :
      {
        "command"      : ".ci/tests/build.sh",
        "dependencies" : { "testcase-serial" : "afterok" }
      },
      "testcase-omp" :
      {
        "submit_options" : { 
                            "cheyenne" : { "resources" : "-l select=1:ncpus=4:ompthreads=4" },
                            "derecho"  : { "resources" : "-l select=1:ncpus=8:ompthreads=8 -l job_priority=economy" }
                            },
        "command"      : ".ci/tests/runNamelists.sh",
        "dependencies" : { "build-omp" : "afterok" }
      },
      "build-mpi" :
      {
        "command"      : ".ci/tests/build.sh",
        "dependencies" : { "testcase-omp" : "afterok" }
      },
      "testcase-mpi" :
      {
        "submit_options" : { 
                            "cheyenne" : { "resources" : "-l select=1:ncpus=4:mpiprocs=6" },
                            "derecho"  : { "resources" : "-l select=1:ncpus=8:mpiprocs=8 -l job_priority=economy" }
                            },
        "command"      : ".ci/tests/runNamelists.sh",
        "dependencies" : { "build-mpi" : "afterok" }
      }
    }
  },
  "em_b_wave" :
  {
    "submit_options" :
    {
      "arguments" :
      {
        ".*testcase.*::args_namelist" : 
        [ 
          "-n", "namelist.input.1NE,namelist.input.2,namelist.input.2NE,namelist.input.3"
        ],
        ".*::args_idealcase"   :
        [
          "-e", "IDEAL_CASE=em_b_wave"
        ]
      }
    },
    "steps" :
    {
      "build-serial" :
      {
        "command"      : ".ci/tests/build.sh"
      },
      "testcase-serial" :
      {
        "submit_options" : {
                            "cheyenne" : { "resources" : "-l select=1:ncpus=1" },
                            "derecho"  : { "resources" : "-l select=1:ncpus=1 -l job_priority=economy" }
                            },
        "command"      : ".ci/tests/runNamelists.sh",
        "dependencies" : { "build-serial" : "afterok" }
      },
      "build-omp" :
      {
        "command"      : ".ci/tests/build.sh",
        "dependencies" : { "testcase-serial" : "afterok" }
      },
      "testcase-omp" :
      {
        "submit_options" : { 
                            "cheyenne" : { "resources" : "-l select=1:ncpus=4:ompthreads=4" },
                            "derecho"  : { "resources" : "-l select=1:ncpus=8:ompthreads=8 -l job_priority=economy" }
                            },
        "command"      : ".ci/tests/runNamelists.sh",
        "dependencies" : { "build-omp" : "afterok" }
      },
      "build-mpi" :
      {
        "command"      : ".ci/tests/build.sh",
        "dependencies" : { "testcase-omp" : "afterok" }
      },
      "testcase-mpi" :
      {
        "submit_options" : { 
                            "cheyenne" : { "resources" : "-l select=1:ncpus=4:mpiprocs=6" },
                            "derecho"  : { "resources" : "-l select=1:ncpus=8:mpiprocs=8 -l job_priority=economy" }
                            },
        "command"      : ".ci/tests/runNamelists.sh",
        "dependencies" : { "build-mpi" : "afterok" }
      }
    }
  },
  "em_fire" :
  {
    "submit_options" :
    {
      "arguments" :
      {
        ".*testcase.*::args_namelist" : 
        [ 
          "-n", "namelist.input.01"
        ],
        ".*::args_idealcase"   :
        [
          "-e", "IDEAL_CASE=em_fire"
        ]
      }
    },
    "steps" :
    {
      "build-serial" :
      {
        "command"      : ".ci/tests/build.sh"
      },
      "testcase-serial" :
      {
        "submit_options" : {
                            "cheyenne" : { "resources" : "-l select=1:ncpus=1" },
                            "derecho"  : { "resources" : "-l select=1:ncpus=1 -l job_priority=economy" }
                            },
        "command"      : ".ci/tests/runNamelists.sh",
        "dependencies" : { "build-serial" : "afterok" }
      },
      "build-omp" :
      {
        "command"      : ".ci/tests/build.sh",
        "dependencies" : { "testcase-serial" : "afterok" }
      },
      "testcase-omp" :
      {
        "submit_options" : { 
                            "cheyenne" : { "resources" : "-l select=1:ncpus=4:ompthreads=4" },
                            "derecho"  : { "resources" : "-l select=1:ncpus=8:ompthreads=8 -l job_priority=economy" }
                            },
        "command"      : ".ci/tests/runNamelists.sh",
        "dependencies" : { "build-omp" : "afterok" }
      },
      "build-mpi" :
      {
        "command"      : ".ci/tests/build.sh",
        "dependencies" : { "testcase-omp" : "afterok" }
      },
      "testcase-mpi" :
      {
        "submit_options" : { 
                            "cheyenne" : { "resources" : "-l select=1:ncpus=4:mpiprocs=6" },
                            "derecho"  : { "resources" : "-l select=1:ncpus=8:mpiprocs=8 -l job_priority=economy" }
                            },
        "command"      : ".ci/tests/runNamelists.sh",
        "dependencies" : { "build-mpi" : "afterok" }
      }
    }
  },
  "em_hill2d_x" :
  {
    "submit_options" :
    {
      "arguments" :
      {
        ".*build.*::args_nesting"    : [ "-n", "0" ],
        ".*testcase.*::args_namelist" : 
        [ 
          "-n", "namelist.input.01"
        ],
        ".*::args_idealcase"   :
        [
          "-e", "IDEAL_CASE=em_hill2d_x"
        ]
      }
    },
    "steps" :
    {
      "build-serial" :
      {
        "command"      : ".ci/tests/build.sh"
      },
      "testcase-serial" :
      {
        "submit_options" : {
                            "cheyenne" : { "resources" : "-l select=1:ncpus=1" },
                            "derecho"  : { "resources" : "-l select=1:ncpus=1 -l job_priority=economy" }
                            },
        "command"      : ".ci/tests/runNamelists.sh",
        "dependencies" : { "build-serial" : "afterok" }
      }
    }
  }
}